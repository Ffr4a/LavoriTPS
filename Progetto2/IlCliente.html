<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Soma SOAP Client</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        input { margin-right: 10px; }
        pre { background-color: #f4f4f4; padding: 10px; border: 1px solid #ccc; overflow: auto; }
    </style>
</head>
<body>
    <h1>Somma di Due Numeri</h1>
    <input id="number1" type="number" placeholder="Numero 1" required />
    <input id="number2" type="number" placeholder="Numero 2" required />
    <button onclick="sumNumbers()">Calcola la Somma</button>
    
    <h2>Risultato:</h2>
    <pre id="result"></pre>

    <script>
        async function sumNumbers() {
            const number1 = document.getElementById('number1').value;
            const number2 = document.getElementById('number2').value;

            const xmlMessage = `
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
    <soapenv:Body>
        <sum>
            <number1>${number1}</number1>
            <number2>${number2}</number2>
        </sum>
    </soapenv:Body>
</soapenv:Envelope>
`;

            const request = new XMLHttpRequest();
            request.open('POST', 'http://localhost:8081', true);
            request.setRequestHeader('Content-Type', 'text/xml');
            request.onload = function() {
                if (request.status === 200) {
                    const response = new DOMParser().parseFromString(request.responseText, 'text/xml');
                    const result = response.getElementsByTagName('result')[0]?.textContent || 'Nessun risultato';
                    document.getElementById('result').innerText = result;
                } else {
                    document.getElementById('result').innerText = 'Errore: ' + request.statusText;
                }
            };
            request.send(xmlMessage);
        }
    </script>
</body>
</html>
